{"version":3,"sources":["captcha/gregwar.js"],"names":["$","Phoenix","plugin","$element","options","$image","find","$refreshButton","bindEvents","on","src","attr","t","Date","getTime","toString","Math","random","indexOf"],"mappings":";;;;;;AAAA;;;;;;;AAOAA,EAAE,YAAM;AACNC,UAAQC,MAAR,CAAe,SAAf;AACE,4BAAYC,QAAZ,EAAoC;AAAA,UAAdC,OAAc,uEAAJ,EAAI;;AAAA;;AAClC,WAAKD,QAAL,GAAgBA,QAAhB;AACA,WAAKC,OAAL,GAAeA,OAAf;AACA,WAAKC,MAAL,GAAc,KAAKF,QAAL,CAAcG,IAAd,CAAmB,sBAAnB,CAAd;AACA,WAAKC,cAAL,GAAsB,KAAKJ,QAAL,CAAcG,IAAd,CAAmB,wBAAnB,CAAtB;;AAEA,WAAKE,UAAL;AACD;;AARH;AAAA;AAAA,mCAUe;AAAA;;AACX,aAAKD,cAAL,CAAoBE,EAApB,CAAuB,OAAvB,EAAgC,YAAM;AACpC,cAAIC,MAAM,MAAKL,MAAL,CAAYM,IAAZ,CAAiB,UAAjB,CAAV;AACA,cAAMC,IAAK,IAAIC,IAAJ,EAAD,CAAWC,OAAX,GAAqBC,QAArB,KAAkC,GAAlC,GAAyCC,KAAKC,MAAL,KAAgB,KAAnE;;AAEA,cAAIP,IAAIQ,OAAJ,CAAY,GAAZ,MAAqB,CAAC,CAA1B,EAA6B;AAC3BR,mBAAO,QAAQE,CAAf;AACD,WAFD,MAEO;AACLF,mBAAO,QAAQE,CAAf;AACD;;AAED,gBAAKP,MAAL,CAAYM,IAAZ,CAAiB,KAAjB,EAAwBD,GAAxB;AACD,SAXD;AAYD;AAvBH;;AAAA;AAAA;AAyBD,CA1BD","file":"gregwar.js","sourcesContent":["/**\n * Part of earth project.\n *\n * @copyright  Copyright (C) 2018 ${ORGANIZATION}.\n * @license    __LICENSE__\n */\n\n$(() => {\n  Phoenix.plugin('gregwar', class GregwarCaptcha {\n    constructor($element, options = {}) {\n      this.$element = $element;\n      this.options = options;\n      this.$image = this.$element.find('[data-captcha-image]');\n      this.$refreshButton = this.$element.find('[data-captcha-refresh]');\n\n      this.bindEvents();\n    }\n\n    bindEvents() {\n      this.$refreshButton.on('click', () => {\n        let src = this.$image.attr('data-src');\n        const t = (new Date).getTime().toString() + '.' + (Math.random() * 10000);\n\n        if (src.indexOf('?') !== -1) {\n          src += '&t=' + t;\n        } else {\n          src += '?t=' + t;\n        }\n\n        this.$image.attr('src', src);\n      });\n    }\n  });\n});\n"]}