{"version":3,"sources":["captcha/gregwar.js"],"names":["$","Phoenix","plugin","$element","options","$image","find","$input","$refreshButton","$buttonIcon","bindEvents","on","refresh","addClass","src","attr","t","Date","getTime","toString","Math","random","indexOf","one","removeClass","val"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEAA,CAAC,CAAC,YAAM;AACNC,EAAAA,OAAO,CAACC,MAAR,CAAe,SAAf;AACE,4BAAYC,QAAZ,EAAoC;AAAA,UAAdC,OAAc,uEAAJ,EAAI;;AAAA;;AAClC,WAAKD,QAAL,GAAgBA,QAAhB;AACA,WAAKC,OAAL,GAAeA,OAAf;AACA,WAAKC,MAAL,GAAc,KAAKF,QAAL,CAAcG,IAAd,CAAmB,sBAAnB,CAAd;AACA,WAAKC,MAAL,GAAc,KAAKJ,QAAL,CAAcG,IAAd,CAAmB,sBAAnB,CAAd;AACA,WAAKE,cAAL,GAAsB,KAAKL,QAAL,CAAcG,IAAd,CAAmB,wBAAnB,CAAtB;AACA,WAAKG,WAAL,GAAmB,KAAKN,QAAL,CAAcG,IAAd,CAAmB,qBAAnB,CAAnB;AAEA,WAAKI,UAAL;AACD;;AAVH;AAAA;AAAA,aAYE,sBAAa;AAAA;;AACX,aAAKF,cAAL,CAAoBG,EAApB,CAAuB,OAAvB,EAAgC,YAAM;AACpC,UAAA,KAAI,CAACC,OAAL;AACD,SAFD;AAGD;AAhBH;AAAA;AAAA,aAkBE,mBAAU;AAAA;;AACR,aAAKH,WAAL,CAAiBI,QAAjB,CAA0B,SAA1B;AAEA,YAAIC,GAAG,GAAG,KAAKT,MAAL,CAAYU,IAAZ,CAAiB,YAAjB,CAAV;AACA,YAAMC,CAAC,GAAI,IAAIC,IAAJ,EAAD,CAAWC,OAAX,GAAqBC,QAArB,KAAkC,GAAlC,GAAyCC,IAAI,CAACC,MAAL,KAAgB,KAAnE;;AAEA,YAAIP,GAAG,CAACQ,OAAJ,CAAY,GAAZ,MAAqB,CAAC,CAA1B,EAA6B;AAC3BR,UAAAA,GAAG,IAAI,QAAQE,CAAf;AACD,SAFD,MAEO;AACLF,UAAAA,GAAG,IAAI,QAAQE,CAAf;AACD;;AAED,aAAKX,MAAL,CAAYkB,GAAZ,CAAgB,MAAhB,EAAwB,YAAM;AAC5B,UAAA,MAAI,CAACd,WAAL,CAAiBe,WAAjB,CAA6B,SAA7B;;AACA,UAAA,MAAI,CAACjB,MAAL,CAAYkB,GAAZ,CAAgB,EAAhB;AACD,SAHD;AAKA,aAAKpB,MAAL,CAAYU,IAAZ,CAAiB,KAAjB,EAAwBD,GAAxB;AACD;AApCH;AAAA;AAAA,aAsCE,iBAAQ;AACN,aAAKP,MAAL,CAAYkB,GAAZ,CAAgB,EAAhB;AACD;AAxCH;;AAAA;AAAA;AA0CD,CA3CA,CAAD","sourcesContent":["/**\n * Part of earth project.\n *\n * @copyright  Copyright (C) 2018 ${ORGANIZATION}.\n * @license    __LICENSE__\n */\n\n$(() => {\n  Phoenix.plugin('gregwar', class GregwarCaptcha {\n    constructor($element, options = {}) {\n      this.$element = $element;\n      this.options = options;\n      this.$image = this.$element.find('[data-captcha-image]');\n      this.$input = this.$element.find('[data-captcha-input]');\n      this.$refreshButton = this.$element.find('[data-captcha-refresh]');\n      this.$buttonIcon = this.$element.find('[data-refresh-icon]');\n\n      this.bindEvents();\n    }\n\n    bindEvents() {\n      this.$refreshButton.on('click', () => {\n        this.refresh();\n      });\n    }\n\n    refresh() {\n      this.$buttonIcon.addClass('fa-spin');\n\n      let src = this.$image.attr('data-image');\n      const t = (new Date).getTime().toString() + '.' + (Math.random() * 10000);\n\n      if (src.indexOf('?') !== -1) {\n        src += '&t=' + t;\n      } else {\n        src += '?t=' + t;\n      }\n\n      this.$image.one('load', () => {\n        this.$buttonIcon.removeClass('fa-spin');\n        this.$input.val('');\n      });\n\n      this.$image.attr('src', src);\n    }\n\n    clear() {\n      this.$input.val('');\n    }\n  });\n});\n"],"file":"gregwar.js"}