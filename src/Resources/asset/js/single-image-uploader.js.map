{"version":3,"sources":["single-image-uploader.js"],"names":["$","plugin","defaultOptions","crop","export_zoom","height","max_height","max_width","min_height","min_width","origin_size","version","width","modal_target","SingleImageDragUploader","element","options","extend","fileData","find","filedrag","fileSelector","filePreview","fileLoader","deleteBox","loader","modal","cropper","saveButton","bindEvents","prototype","self","value","on","event","stopPropagation","preventDefault","addClass","removeClass","cropit","imageBackground","exportZoom","onImageError","error","swal","Phoenix","Translator","translate","sprintf","hide","onImageLoaded","onImageLoading","show","files","originalEvent","target","dataTransfer","handleFileSelect","$input","click","saveImage","$this","is","val","file","checkFile","reader","FileReader","onload","result","image","Image","checkSize","type","src","readAsDataURL","types","allow_types","indexOf","Error","e","message","quality","originalSize","ajax_url","attr","uploadImage","done","res","storeValue","data","url","always","format","post","prop","trigger","fn","jQuery"],"mappings":"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","file":"single-image-uploader.js","sourcesContent":["/**\n * Part of unidev project.\n *\n * @copyright  Copyright (C) 2016 {ORGANIZATION}. All rights reserved.\n * @license    GNU General Public License version 2 or later.\n */\n\n(function($) {\n  \"use strict\";\n\n  var plugin = 'singleImageDragUploader';\n\n  var defaultOptions = {\n    crop: true,\n    export_zoom: 1,\n    height: 300,\n    max_height: null,\n    max_width: null,\n    min_height: null,\n    min_width: null,\n    origin_size: false,\n    version: 1,\n    width: 300,\n    modal_target: ''\n  };\n\n  /**\n   * Init class.\n   *\n   * @param {jQuery} element\n   * @param {Object} options\n   *\n   * @constructor\n   */\n  var SingleImageDragUploader = function(element, options) {\n    this.element = element;\n    this.options = $.extend(true, {}, defaultOptions, options);\n\n    // Input\n    this.fileData = this.element.find('.sid-data');\n    this.filedrag = this.element.find('.sid-area');\n    this.fileSelector = this.element.find('.sid-file-select-button');\n    this.filePreview = this.element.find('.sid-preview');\n    this.fileLoader = this.element.find('.sid-img-loader');\n    this.deleteBox = this.element.find('.sid-delete-image');\n    this.loader = this.element.find('.sid-loader');\n\n    // Modal\n    this.modal = $(this.options.modal_target);\n    this.cropper = this.modal.find('.sid-cropper');\n    this.saveButton = this.modal.find('.sid-save-button');\n\n    this.bindEvents();\n  };\n\n  SingleImageDragUploader.prototype = {\n    /**\n     * Bind events.\n     */\n    bindEvents: function() {\n      var self = this;\n      var value;\n\n      this.filedrag.on('dragover', function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        $(this).addClass('hover');\n      });\n\n      this.filedrag.on('dragleave', function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        $(this).removeClass('hover');\n      });\n\n      this.cropper.cropit({\n        // imageState: {src: event.target.result},\n        imageBackground: true,\n        exportZoom: this.options.export_zoom,\n        onImageError: function(error) {\n          swal(\n            Phoenix.Translator.translate('unidev.field.single.image.message.invalid.size.title'),\n            Phoenix.Translator.sprintf('unidev.field.single.image.message.invalid.size.desc', self.options.width, self.options.height),\n            'warning'\n          );\n          self.loader.hide();\n        },\n        onImageLoaded: function() {\n          self.modal.modal('show');\n          self.loader.hide();\n        },\n        onImageLoading: function() {\n          self.loader.show();\n        }\n      });\n\n      // Reset file input if modal closed\n      self.modal.on('hide.bs.modal', function() {\n        //$(self.fileSelector).val(null);\n      });\n\n      // File drop\n      this.filedrag.on(\"drop\", function(event) {\n        event.stopPropagation();\n        event.preventDefault();\n\n        $(this).removeClass('hover');\n\n        var files = event.originalEvent.target.files || event.originalEvent.dataTransfer.files;\n\n        self.handleFileSelect(files[0]);\n      });\n\n      // Selector\n      this.fileSelector.on('click', function() {\n        var $input = $('<input type=\"file\">');\n\n        $input.on('change', function(event) {\n          var files = event.originalEvent.target.files || event.originalEvent.dataTransfer.files;\n\n          self.handleFileSelect(files[0])\n        });\n\n        $input.click();\n      });\n\n      // Save button\n      this.saveButton.on('click', function() {\n        self.saveImage();\n      });\n\n      // Delete box\n      if (this.options.version !== 1) {\n        this.deleteBox.on('change', function() {\n          var $this = $(this);\n\n          if ($this.is(':checked')) {\n            value = self.fileData.val();\n            self.fileData.val('');\n          } else {\n            self.fileData.val(value);\n            value = null;\n          }\n        });\n      }\n    },\n\n    /**\n     * Handle file select and raise cropit.\n     *\n     * @param {File} file\n     */\n    handleFileSelect: function(file) {\n      if (!this.checkFile(file)) {\n        return;\n      }\n\n      var self = this;\n      var reader = new FileReader;\n\n      reader.onload = function(event) {\n        if (self.options.crop) {\n          self.cropper.cropit('imageSrc', event.target.result);\n        } else {\n          var image = new Image;\n\n          image.onload = function() {\n            if (!self.checkSize(image)) {\n              return;\n            }\n\n            self.saveImage(event.target.result, file.type);\n          };\n\n          image.src = event.target.result;\n        }\n      };\n\n      reader.readAsDataURL(file);\n    },\n\n    /**\n     * Check file type is image.\n     *\n     * @param {File} file\n     *\n     * @returns {boolean}\n     */\n    checkFile: function(file) {\n      var types = [\n        'image/jpeg',\n        'image/png'\n      ];\n\n      types = this.options.allow_types || types;\n\n      if (types.indexOf(file.type, types) < 0) {\n        swal(\n          Phoenix.Translator.translate('unidev.field.single.image.message.invalid.image.title'),\n          Phoenix.Translator.translate('unidev.field.single.image.message.invalid.image.desc'),\n          'error'\n        );\n\n        return false;\n      }\n\n      return true;\n    },\n\n    /**\n     * Check image size.\n     *\n     * @param {Image} image\n     *\n     * @returns {boolean}\n     */\n    checkSize: function(image) {\n      try {\n        if (this.options.max_width !== null && this.options.max_width < image.width) {\n          throw new Error(Phoenix.Translator.sprintf('unidev.field.single.image.message.invalid.size.max.width', this.options.max_width));\n        }\n\n        if (this.options.min_width !== null && this.options.min_width > image.width) {\n          throw new Error(Phoenix.Translator.sprintf('unidev.field.single.image.message.invalid.size.min.width', this.options.min_width));\n        }\n\n        if (this.options.max_height !== null && this.options.max_height < image.height) {\n          throw new Error(Phoenix.Translator.sprintf('unidev.field.single.image.message.invalid.size.max.height', this.options.max_height));\n        }\n\n        if (this.options.min_height !== null && this.options.min_height > image.height) {\n          throw new Error(Phoenix.Translator.sprintf('unidev.field.single.image.message.invalid.size.min.height', this.options.min_height));\n        }\n      } catch (e) {\n        swal(\n          Phoenix.Translator.translate('unidev.field.single.image.message.invalid.size.title'),\n          e.message,\n          'error'\n        );\n\n        return false;\n      }\n\n      return true;\n    },\n\n    /**\n     * Save image to input.\n     */\n    saveImage: function(image, type) {\n      var self = this;\n      type = type || 'image/jpeg';\n\n      image = image || this.cropper.cropit('export', {\n        type: type,\n        quality: .9,\n        originalSize: this.options.origin_size || false\n      });\n\n      this.modal.modal('hide');\n\n      if (this.options.ajax_url) {\n        this.filePreview.attr('src', '');\n        this.filePreview.hide();\n        this.fileLoader.show();\n\n        this.uploadImage(image)\n          .done(function (res) {\n            self.storeValue(res.data.url);\n          })\n          .always(function () {\n            self.fileLoader.hide();\n          });\n\n        return;\n      }\n\n      self.storeValue(image);\n    },\n\n    uploadImage: function (image) {\n      var data = {\n        file: image,\n        format: 'base64'\n      };\n\n      return $.post(this.options.ajax_url, data);\n    },\n\n    storeValue: function (image) {\n      this.fileData.val(image);\n      this.filePreview.attr('src', image);\n      this.filePreview.show();\n\n      // Make delete box unchecked\n      this.deleteBox.prop('checked', false);\n\n      // Trigger change\n      this.fileData.trigger('change');\n      this.filePreview.trigger('change');\n    }\n  };\n\n  /**\n   * Push plugins.\n   *\n   * @param options\n   *\n   * @returns {*}\n   */\n  $.fn[plugin] = function(options) {\n    if (!$.data(this, \"unidev.\" + plugin)) {\n      $.data(this, \"unidev.\" + plugin, new SingleImageDragUploader(this, options));\n    }\n\n    return $.data(this, \"unidev.\" + plugin);\n  };\n\n})(jQuery);\n"]}