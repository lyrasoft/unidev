"use strict";function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _construct(t,e,n){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&_setPrototypeOf(r,n.prototype),r}).apply(null,arguments)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S3Uploader=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),this.name=e,this.options=$.extend(!0,{},this.constructor.defaultOptions,n)}return _createClass(t,null,[{key:"getInstance",value:function(t){if(!this.instances[t]){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];this.instances[t]=_construct(this,[t].concat(n))}return this.instances[t]}}]),_createClass(t,[{key:"upload",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=new FormData;n.append("key",this.options.subfolder.trim("/")+"/"+e.trim("/")),n.append("acl",this.options.acl),n.append("AWSAccessKeyId",this.options.accessKey),n.append("policy",this.options.policy),n.append("signature",this.options.signature),n.append("Content-type",t.type),n.append("Content-Disposition",""),n.append("file",t),$.post({url:this.options.endpoint,data:n,processData:!1,contentType:!1,type:"POST"}).done(function(t,e,n){console.log(n)}).fail(function(t){console.log(t)})}}]),t}();_defineProperty(S3Uploader,"defaultOptions",{accessKey:"",bucket:"",signature:"",acl:"",endpoint:"",region:"",subfolder:"",version:2}),_defineProperty(S3Uploader,"instances",{});